<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>Lucky Spin ‚Äì Reclamar</title>
  <meta name="description" content="Gir√° la ruleta y reclam√° tu premio. Redirecci√≥n a WhatsApp con un toque." />
  <style>
    :root {
      --bg: #0a0f1c;
      --card: #121a2c;
      --accent: #22d3ee;
      --accent-2: #a78bfa;
      --text: #e6eef8;
      --muted: #9fb3c8;
      --good: #34d399;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; margin: 0; padding: 0; }
    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, sans-serif;
      background: radial-gradient(1200px 600px at 50% -200px, #13223d 0%, var(--bg) 60%);
      color: var(--text);
      -webkit-tap-highlight-color: transparent;
      overflow-x: hidden;
    }
    .wrap { min-height: 100dvh; display: grid; grid-template-rows: auto 1fr auto; gap: 12px; }
    header { padding: 12px; text-align: center; }
    header h1 { margin: 6px 0 4px; font-size: 6vw; letter-spacing: .3px; }
    header p { margin: 0; color: var(--muted); font-size: 4vw; }

    .card {
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.0));
      border: 1px solid rgba(255,255,255,.08);
      box-shadow: 0 6px 16px rgba(0,0,0,.4);
      border-radius: 16px;
      margin: 0 auto;
      width: 95%;
      max-width: 480px;
    }

    .stage {
      margin: 8px auto 0;
      width: min(96vw, 520px);
      aspect-ratio: 1/1; /* cuadrado perfecto */
      position: relative;
      display: block;
      overflow: visible; /* que se vea el tri√°ngulo */
    }
    .wheel-wrap { position: relative; width: 100%; height: 100%; }
    .peg { position: absolute; top: 0; left: 50%; transform: translate(-50%, -8%); pointer-events: none; }
    .peg::after { content: ""; width: 0; height: 0; border-left: 16px solid transparent; border-right: 16px solid transparent; border-bottom: 26px solid var(--accent); filter: drop-shadow(0 4px 10px rgba(34,211,238,.45)); }
    .wheel {
      position: absolute; inset: 0; margin: auto; /* centra absoluto */
      width: 100%; height: 100%; display: block;
      filter: drop-shadow(0 12px 24px rgba(0,0,0,.45));
      transform: rotate(0deg);
      transform-origin: 50% 50%;
      transition: transform 0s;
    }

    .controls { display: grid; gap: 10px; padding: 12px; justify-items: center; }
    .cta { font-weight: 700; font-size: 4.5vw; padding: 12px 16px; border-radius: 12px; border: 0; background: linear-gradient(90deg, var(--accent), var(--accent-2)); color: #0b1020; cursor: pointer; box-shadow: 0 6px 16px rgba(34,211,238,.25); text-align: center; width: 100%; max-width: 280px; }

    .meta { display: grid; gap: 8px; padding: 0 12px 12px; color: var(--muted); font-size: 3.8vw; text-align: center; }
    .won { color: var(--good); font-weight: 700; text-align: center; font-size: 5vw; padding: 6px 10px; border-radius: 10px; background: rgba(52,211,153,.12); border: 1px solid rgba(52,211,153,.28); }

    .recent { display: none; }
    footer { text-align: center; padding: 8px 12px 14px; color: var(--muted); font-size: 3.5vw; }
    a { color: var(--accent); text-decoration: none; }

    @media(min-width:700px){
      header h1{font-size:32px} header p{font-size:15px}
      .cta{font-size:18px}
      .meta{font-size:14px}
      .won{font-size:20px}
      .recent{display:grid}
    }
    @media (max-width: 400px) {
      /* Afinamos tipograf√≠as y espacio en m√≥viles chicos */
      .recent { padding: 6px 10px 12px; }
      .cta { padding: 12px 14px; font-size: 15px; }
      .won { font-size: 17px; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>üéØ Gir√° y reclam√°</h1>
      <p>Premios reales en ARS; la activaci√≥n se completa por WhatsApp.</p>
    </header>

    <main class="card">
      <div class="stage">
        <div class="wheel-wrap">
          <div class="peg" aria-hidden="true"></div>
          <svg class="wheel" viewBox="0 0 1000 1000" aria-label="Ruleta de premios">
            <circle cx="500" cy="500" r="487" fill="#0f172a" stroke="#1f2a44" stroke-width="6"/>
            <g id="segments"></g>
            <circle cx="500" cy="500" r="490" fill="none" stroke="#26324e" stroke-width="14"/>
            <circle cx="500" cy="500" r="60" fill="#0b1020" stroke="#26324e" stroke-width="10"/>
            <circle cx="500" cy="500" r="28" fill="#22d3ee" />
          </svg>
        </div>
      </div>

      <div class="controls">
        <button id="spinBtn" class="cta">Girar ruleta</button>
        <a id="claimBtn" class="cta" style="display:none;" href="#" rel="noopener nofollow">Reclamar por WhatsApp</a>
      </div>

      <div class="meta">
        <div id="wonMsg" class="won" style="display:none">Ganaste $<span id="wonAmount"></span></div>
        <small>Al hacer clic en "Reclamar", ser√°s redirigido/a al WhatsApp asignado con tu premio prellenado.</small>
      </div>
    </main>

    <footer>
      <small>‚ö†Ô∏è Los premios requieren activaci√≥n con una carga m√≠nima. V√°lido solo para usuarios nuevos o inactivos.</small>
    </footer>
  </div>

  <script>
    const WHATSAPP_NUMBER = "+5491168392647";
    const PRIZES = [2000,2500,3000,3500,4000,4500,5000,6000,7000,8000,9000,10000];
    let isSpinning=false, currentRotation=0;

    const wheel=document.querySelector('.wheel');
    const segmentsGroup=document.getElementById('segments');
    const spinBtn=document.getElementById('spinBtn');
    const claimBtn=document.getElementById('claimBtn');
    const wonMsg=document.getElementById('wonMsg');
    const wonAmount=document.getElementById('wonAmount');

    function polarToCartesian(cx,cy,r,angleDeg){ const a=(angleDeg-90)*Math.PI/180; return {x:cx+r*Math.cos(a),y:cy+r*Math.sin(a)}; }
    function describeArc(cx,cy,r,startAngle,endAngle){ const start=polarToCartesian(cx,cy,r,endAngle); const end=polarToCartesian(cx,cy,r,startAngle); const largeArcFlag=endAngle-startAngle<=180?'0':'1'; return ['M',start.x,start.y,'A',r,r,0,largeArcFlag,0,end.x,end.y].join(' '); }

    function buildSegments(){ const n=PRIZES.length, step=360/n; segmentsGroup.innerHTML=''; for(let i=0;i<n;i++){ const start=i*step, end=start+step; const pathOuter=describeArc(500,500,470,start,end); const pathInner=describeArc(500,500,180,end,start); const seg=document.createElementNS('http://www.w3.org/2000/svg','path'); seg.setAttribute('d',`${pathOuter} L ${polarToCartesian(500,500,180,start).x} ${polarToCartesian(500,500,180,start).y} ${pathInner} Z`); seg.setAttribute('fill',i%2===0?'url(#segA)':'url(#segB)'); seg.setAttribute('opacity','0.95'); seg.setAttribute('stroke','#0b1020'); seg.setAttribute('stroke-width','2'); segmentsGroup.appendChild(seg); const pathId=`arc-${i}`; const tp=document.createElementNS('http://www.w3.org/2000/svg','path'); tp.setAttribute('id',pathId); tp.setAttribute('d',describeArc(500,500,325,start+2,end-2)); tp.setAttribute('fill','none'); segmentsGroup.appendChild(tp); const text=document.createElementNS('http://www.w3.org/2000/svg','text'); text.setAttribute('fill','#06101e'); text.setAttribute('font-weight','800'); text.setAttribute('font-size','42'); text.setAttribute('letter-spacing','1.5'); const textPath=document.createElementNS('http://www.w3.org/2000/svg','textPath'); textPath.setAttributeNS('http://www.w3.org/1999/xlink','xlink:href',`#${pathId}`); textPath.setAttribute('startOffset','50%'); textPath.setAttribute('text-anchor','middle'); textPath.textContent=`$${PRIZES[i].toLocaleString('es-AR')}`; text.appendChild(textPath); segmentsGroup.appendChild(text); } }

    function buildWhatsAppLink(amount){ const msg=encodeURIComponent(`Hola, quiero activar mi premio de $${amount.toLocaleString('es-AR')}.`); return `https://wa.me/${WHATSAPP_NUMBER.replace(/\D/g,'')}?text=${msg}`; }
    function pickPrizeByRotation(totalDeg){ const n=PRIZES.length, step=360/n; const normalized=(360-(totalDeg%360))%360; const idx=Math.floor(normalized/step)%n; return {index:idx,amount:PRIZES[idx]}; }

    async function spin(){ if(isSpinning) return; isSpinning=true; wonMsg.style.display='none'; claimBtn.style.display='none'; const extraTurns=6+Math.floor(Math.random()*4); const finalOffset=Math.random()*360; const target=currentRotation+extraTurns*360+finalOffset; const duration=4200+Math.floor(Math.random()*1000); wheel.style.transition=`transform ${duration}ms cubic-bezier(.2,.9,.2,1)`; wheel.style.transform=`rotate(${target}deg)`; await new Promise(res=>setTimeout(res,duration+50)); currentRotation=target; const {amount}=pickPrizeByRotation(currentRotation); wonAmount.textContent=amount.toLocaleString('es-AR'); wonMsg.style.display='block'; claimBtn.href=buildWhatsAppLink(amount); claimBtn.style.display='inline-block'; requestAnimationFrame(()=>{ wheel.style.transition='transform 0s'; }); isSpinning=false; }

    spinBtn.addEventListener('click',spin);
    buildSegments();
  </script>
</body>
</html>
